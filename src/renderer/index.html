<!DOCTYPE html>
<!--
  ============================================================
  Beamer Tracer â€“ HTML Markup
  ============================================================

  Dieses HTML-Dokument definiert die gesamte UI-Struktur der Anwendung.
  Es gibt kein dynamisches HTML-Rendering â€“ alle Elemente sind statisch
  definiert und werden per JavaScript ein-/ausgeblendet (CSS-Klasse 'hidden').

  Aufbau (von oben nach unten):
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1. #toolbar                    â€“ Fixierte Toolbar am oberen Rand
     â”œâ”€â”€ Bild laden (#btn-load)
     â”œâ”€â”€ Overlay-Buttons (#btn-grid, #btn-center, #btn-thirds, #btn-ruler, #btn-crosshair)
     â”œâ”€â”€ Rasterweite-Inputs (#input-grid-size, #input-grid-size-cm)
     â”œâ”€â”€ Messwerkzeug (#btn-measure, #btn-measure-clear)
     â”œâ”€â”€ Kalibrierung (#btn-calibrate, #btn-restore-zoom, #btn-recalibrate)
     â”œâ”€â”€ Filter-Slider (#slider-contrast, #slider-brightness)
     â”œâ”€â”€ Info-Displays (#zoom-display, #scale-display)
     â””â”€â”€ Settings/Hilfe/Vollbild (#btn-settings, #btn-help, #btn-fullscreen)

  2. #settings-overlay           â€“ Modal: Overlay-Einstellungen (Farbe/Deckkraft/Dicke)
  3. #calibrate-banner-step1     â€“ Gelbes Banner: Kalibrierung Schritt 1
  4. #calibrate-banner-step2     â€“ Gelbes Banner: Kalibrierung Schritt 2
  5. #fullscreen-trigger         â€“ Unsichtbare Hover-Zone fÃ¼r Toolbar im Vollbild
  6. #viewport                   â€“ Canvas-Container
     â”œâ”€â”€ #canvas-image           â€“ Untere Schicht: Bild-Rendering
     â””â”€â”€ #canvas-overlay         â€“ Obere Schicht: Overlays, Hilfslinien, UI
  7. #help-overlay               â€“ Modal: Tastenbelegung + Tour-Button
  8. #context-menu               â€“ Rechtsklick-KontextmenÃ¼

  Script-Einbindung:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Das gebÃ¼ndelte Renderer-Script (dist/renderer.js) wird am Ende des
  <body> geladen. Es wird von esbuild aus src/renderer/main.js erzeugt.

  ID-Konventionen:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - btn-*      â†’ Buttons (btn-load, btn-grid, btn-calibrate, ...)
  - slider-*   â†’ Range-Inputs (slider-contrast, slider-brightness)
  - input-*    â†’ Nummerische Inputs (input-grid-size, input-calibrate-cm)
  - style-*    â†’ Settings-Panel Inputs (style-grid-color, style-grid-opacity, ...)
  - *-display  â†’ Nur-Lese Anzeigen (zoom-display, scale-display, ...)
  - *-overlay  â†’ Modale Overlays (help-overlay, settings-overlay)
  - ctx-check-*â†’ Checkmarks im KontextmenÃ¼ (ctx-check-grid, ...)
-->
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Beamer Tracer</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- â”€â”€ Toolbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="toolbar">
    <button id="btn-load" title="Bild laden (Ctrl+O)">ğŸ“‚ Bild</button>
    <div class="separator"></div>
    <button id="btn-grid" title="Raster ein/aus (G)">ğŸ“ Raster</button>
    <label class="toolbar-input" id="grid-input-px" title="Rasterweite in Pixel">
      <input type="number" id="input-grid-size" value="50" min="10" max="500" step="10">
      <span>px</span>
    </label>
    <label class="toolbar-input" id="grid-input-cm" title="Rasterweite in cm" style="display:none">
      <input type="number" id="input-grid-size-cm" value="5" min="0.5" max="100" step="0.5">
      <span>cm</span>
    </label>
    <button id="btn-center" title="Mittellinien (C)">âœ› Mitte</button>
    <button id="btn-thirds" title="Drittel-Linien (T)">â–¦ Drittel</button>
    <button id="btn-ruler" title="ReferenzmaÃŸ (R)">ğŸ“ MaÃŸstab</button>
    <button id="btn-crosshair" class="active" title="Fadenkreuz ein/aus (X)">âœš Fadenkreuz</button>
    <div class="separator"></div>
    <button id="btn-measure" title="Messwerkzeug (M)">ğŸ“ Messen</button>
    <button id="btn-measure-clear" class="hidden" title="Alle Messungen lÃ¶schen">ğŸ—‘ LÃ¶schen</button>
    <div class="separator"></div>
    <button id="btn-calibrate" title="Kalibrierung starten">ğŸ”§ Kalibrieren</button>
    <button id="btn-restore-zoom" class="hidden" title="Kalibrierten Zoom wiederherstellen">ğŸ¯ Zoom</button>
    <button id="btn-recalibrate" class="hidden" title="Kalibrierung neu starten">ğŸ”„ Neu</button>
    <div class="separator"></div>
    <label class="toolbar-label" title="Kontrast">
      ğŸ”†
      <input type="range" id="slider-contrast" min="50" max="300" value="100" step="5">
      <span id="contrast-display">100%</span>
    </label>
    <label class="toolbar-label" title="Helligkeit">
      â˜€ï¸
      <input type="range" id="slider-brightness" min="0" max="300" value="100" step="5">
      <span id="brightness-display">100%</span>
    </label>
    <div class="separator"></div>
    <span id="zoom-display" title="Zoom-Stufe">100%</span>
    <span id="scale-display" title="Kalibrierter MaÃŸstab"></span>
    <button id="btn-settings" title="Overlay-Einstellungen">âš™ï¸</button>
    <button id="btn-help" title="Hilfe (H / F1)">â“</button>
    <button id="btn-fullscreen" title="Vollbild (F / F11)">â›¶</button>
  </div>

  <!-- Overlay-Einstellungen Panel -->
  <div id="settings-overlay" class="hidden">
    <div class="settings-box">
      <h2>âš™ï¸ Overlay-Einstellungen</h2>

      <div class="settings-row">
        <span class="settings-label">ğŸ“ Raster</span>
        <label title="Farbe"><input type="color" id="style-grid-color" value="#ffffff"></label>
        <label title="Deckkraft">
          <input type="range" id="style-grid-opacity" min="0.05" max="1" step="0.05" value="0.18">
          <span class="style-val" id="style-grid-opacity-val">18%</span>
        </label>
        <label title="Dicke">
          <input type="range" id="style-grid-width" min="0.25" max="5" step="0.25" value="0.5">
          <span class="style-val" id="style-grid-width-val">0.5</span>
        </label>
      </div>

      <div class="settings-row">
        <span class="settings-label">âœ› Mitte</span>
        <label title="Farbe"><input type="color" id="style-center-color" value="#00ff00"></label>
        <label title="Deckkraft">
          <input type="range" id="style-center-opacity" min="0.05" max="1" step="0.05" value="0.6">
          <span class="style-val" id="style-center-opacity-val">60%</span>
        </label>
        <label title="Dicke">
          <input type="range" id="style-center-width" min="0.25" max="5" step="0.25" value="1">
          <span class="style-val" id="style-center-width-val">1</span>
        </label>
      </div>

      <div class="settings-row">
        <span class="settings-label">â–¦ Drittel</span>
        <label title="Farbe"><input type="color" id="style-thirds-color" value="#0096ff"></label>
        <label title="Deckkraft">
          <input type="range" id="style-thirds-opacity" min="0.05" max="1" step="0.05" value="0.5">
          <span class="style-val" id="style-thirds-opacity-val">50%</span>
        </label>
        <label title="Dicke">
          <input type="range" id="style-thirds-width" min="0.25" max="5" step="0.25" value="1">
          <span class="style-val" id="style-thirds-width-val">1</span>
        </label>
      </div>

      <div class="settings-row">
        <span class="settings-label">âœš Fadenkreuz</span>
        <label title="Farbe"><input type="color" id="style-crosshair-color" value="#ffffff"></label>
        <label title="Deckkraft">
          <input type="range" id="style-crosshair-opacity" min="0.05" max="1" step="0.05" value="0.45">
          <span class="style-val" id="style-crosshair-opacity-val">45%</span>
        </label>
        <label title="Dicke">
          <input type="range" id="style-crosshair-width" min="0.25" max="5" step="0.25" value="0.75">
          <span class="style-val" id="style-crosshair-width-val">0.75</span>
        </label>
      </div>

      <button id="btn-settings-reset">â†©ï¸ ZurÃ¼cksetzen</button>
      <button id="btn-settings-close">SchlieÃŸen</button>
    </div>
  </div>
  <!-- â”€â”€ Kalibrierungs-Banner (Ã¼ber dem Viewport) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="calibrate-banner-step1" class="calibrate-banner hidden">
    ğŸ”§ <strong>Schritt 1 â€“ ProjektionsflÃ¤che:</strong> Verschiebe die gelbe 1-Meter-Linie (<strong>Maus ziehen</strong>) und zoome sie (<strong>Mausrad / +âˆ’</strong>), bis sie genau der echten 1-Meter-Markierung auf der Wand entspricht.
    <button id="btn-cal-step1-ok">âœ… Weiter</button>
    <button id="btn-cal-cancel">Abbrechen</button>
  </div>
  <div id="calibrate-banner-step2" class="calibrate-banner hidden">
    ğŸ”§ <strong>Schritt 2 â€“ Bild kalibrieren:</strong> Klicke <strong>2 Punkte</strong> auf dem Bild. Punkte kÃ¶nnen per Drag verschoben werden. <strong>Shift</strong> = horizontal/vertikal einrasten. <strong>Mausrad</strong> = Zoom, <strong>Pfeiltasten</strong> = Pan.
    <label style="margin-left:12px">Abstand:
      <input type="number" id="input-calibrate-cm" value="10" min="0.1" step="0.1" style="width:60px;text-align:right;margin:0 4px"> cm
    </label>
    <button id="btn-cal-step2-ok" disabled>âœ… BestÃ¤tigen</button>
    <button id="btn-cal-cancel2">Abbrechen</button>
  </div>
  <!-- â”€â”€ Vollbild: unsichtbare Hover-Zone am oberen Rand â”€â”€â”€â”€ -->
  <!-- Bei mouseenter wird die Toolbar im Vollbild-Modus sichtbar -->
  <div id="fullscreen-trigger"></div>

  <!-- â”€â”€ Viewport: Canvas-Container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <!-- EnthÃ¤lt zwei Ã¼bereinander liegende Canvas-Elemente -->
  <div id="viewport">
    <canvas id="canvas-image"></canvas>
    <canvas id="canvas-overlay"></canvas>
  </div>
  <!-- â”€â”€ Hilfe-Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="help-overlay" class="hidden">
    <div class="help-box">
      <h2>âŒ¨ï¸ Tastenbelegung</h2>
      <table>
        <tr><td>Pfeiltasten</td><td>Pan (5px)</td></tr>
        <tr><td>Shift + Pfeiltasten</td><td>Fein-Pan (1px)</td></tr>
        <tr><td>Ctrl + Pfeiltasten</td><td>Grob-Pan (50px)</td></tr>
        <tr><td>+ / âˆ’</td><td>Zoom rein/raus (1%)</td></tr>
        <tr><td>Mausrad</td><td>Zoom zum Cursor</td></tr>
        <tr><td>Linke Maus / Mitteltaste</td><td>Bild ziehen</td></tr>
        <tr><td>G</td><td>Raster</td></tr>
        <tr><td>C</td><td>Mittellinien</td></tr>
        <tr><td>T</td><td>Drittel</td></tr>
        <tr><td>R</td><td>MaÃŸstab</td></tr>
        <tr><td>X</td><td>Fadenkreuz</td></tr>
        <tr><td>M</td><td>Messwerkzeug</td></tr>
        <tr><td>F / F11</td><td>Vollbild ein/aus</td></tr>
        <tr><td>0</td><td>Ansicht zurÃ¼cksetzen</td></tr>
        <tr><td>Ctrl + O</td><td>Bild laden</td></tr>
        <tr><td>Ctrl + V</td><td>Bild aus Zwischenablage einfÃ¼gen</td></tr>
        <tr><td>H / F1</td><td>Diese Hilfe</td></tr>
      </table>
      <div class="help-tour-row">
        <button id="btn-tour-start">ğŸ“ EinfÃ¼hrungstour starten</button>
      </div>
      <button id="btn-help-close">SchlieÃŸen</button>
    </div>
  </div>
  <!-- â”€â”€ KontextmenÃ¼ (Rechtsklick) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <!-- data-action wird von contextMenu.js ausgewertet -->
  <div id="context-menu" class="context-menu hidden">
    <div class="context-menu-item" data-action="load">ğŸ“‚ Bild laden</div>
    <div class="context-menu-item" data-action="grid"><span class="ctx-check" id="ctx-check-grid"></span>ğŸ“ Raster an/aus</div>
    <div class="context-menu-item" data-action="center"><span class="ctx-check" id="ctx-check-center"></span>âœ› Mitte an/aus</div>
    <div class="context-menu-item" data-action="thirds"><span class="ctx-check" id="ctx-check-thirds"></span>â–¦ Drittel an/aus</div>
    <div class="context-menu-item" data-action="ruler"><span class="ctx-check" id="ctx-check-ruler"></span>ğŸ“ MaÃŸstab an/aus</div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="reset">â†©ï¸ Ansicht zurÃ¼cksetzen</div>
    <div class="context-menu-item" data-action="calibrate">ğŸ”§ Kalibrieren</div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item" data-action="help">â“ Hilfe</div>
    <div class="context-menu-item" data-action="tour">ğŸ“ EinfÃ¼hrungstour</div>
  </div>

  <!-- â”€â”€ GebÃ¼ndeltes Renderer-Script (erzeugt via esbuild) â”€â”€â”€ -->
  <script src="../../dist/renderer.js"></script>
</body>
</html>